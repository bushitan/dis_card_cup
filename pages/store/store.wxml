
<view class="pg-min-height-xl box" >
    <image src="/images/bg.png" class="bg" mode="widthFix"></image>

    <view class="pg-space-xl"></view>
    <!-- <view class="pg-space-xl"></view> -->
     <!-- <view class="pg-space-xl"></view> -->

    <view class="flex flex-direction justify-center align-center">
        <image src="{{store.Logo}}" class="logo" mode="widthFix"></image>
        <text class="text-bold text-lg margin-top">{{store.Name}}</text>
    </view>


    <view class="pg-space"></view>
        

    <view class="cu-card padding-lr margin-top" >
        <view class=" pg-radius  shadow shadow-warp bg-white ">
            <view class="cu-bar  solid-bottom bg-green">
                <view class="action text-white ">
                    <text class="text-price text-xxl"></text>                
                    <!-- <text class="">先享规则</text>   -->
                    <!-- <input placeholder="请输入付款金额" placeholder-style="color:rgba(255,255,255,0.7)" ></input> -->
                    
                    <input placeholder="请输入消费金额"  placeholder-style="color:rgba(255,255,255,0.7)"
                        class="text-left text-bold text-xl text-white  margin-left-xs " type="digit" 
                        value="{{inputPriceNum}}"
                        bindfocus="inputFocus"
                        bindblur="inputConfirm"
                        maxlength="4"
                        ></input>                     
                </view>
            </view>
            <view hidden="{{cardList.length==0}}">
                <view class="cu-list menu bg-white padding-lr padding-bottom" wx:if="{{showPayDetail}}">
                    <view class="flex justify-between padding-top text-gray ">
                        <view class="action ">
                            <text class="">支付价格：</text>
                        </view>
                        <view class="action ">                    
                            <text class="text-price "></text>{{inputPrice}}元
                        </view>
                    </view>
                    <view class="flex justify-between padding-top  ">
                        <view class="action text-red">
                            <text class="">先享优惠：</text>
                        </view>
                        <view class="action text-red">                    
                            - <text class="text-price "></text>{{discountPrice}}元
                        </view>
                    </view>
                    <view class="flex justify-between padding-top ">
                        <view class="action text-green">
                            <text class="">实际支付：</text>
                        </view>
                        <view class="action    text-green">  
                            <text class="text-price "></text>{{payPrice}}元
                        </view>
                    </view>
                </view>  
            </view>  
            <!-- <view class="cu-list menu ">
                <view class="flex justify-between align-center padding ">
                    <view class="action">
                        <text class="">奖励</text>
                    </view>
                    <view class="action text-bold {{ isHasDiscountCard ? '' : 'text-red' }} text-xl basis-xl text-right" >
                        <text class="">{{item.reward_desc}}</text>
                    </view>
                </view>
                <view class="flex justify-between padding ">
                    <view class="action">
                        <text class="f">任务</text>
                    </view>
                    <view class="action basis-xl text-right">
                        <text class="">{{item.objective_desc}}</text>
                    </view>
                </view>
               
                <view class=" padding-lr padding-bottom ">
                     <view class="" style=" border-top: 1rpx solid rgba(0, 0, 0, 0.1) ;"  ></view>
                    <view class="  text-sm  {{ !isHasDiscountCard ? ' text-gray' : ' text-white' }} margin-top-sm" >
                       <text class="cuIcon-info margin-right-xs"></text> <text class="">如未完成约定消费次数，微信支付将自动扣除已享优惠额度</text>
                    </view>
                </view>
                
            </view>      -->
        </view>    
    </view>
    <!-- <view class="padding-lr">
        <button class="cu-btn bg-green text-white block padding-tb " 
            catchtap="getNewCard" data-discount_card_id="{{item.discount_card_id}}"
        >领取奖励，再付款</button>
    </view> -->

    
    <view class="padding-lr margin-top-sm"  wx:if='{{showPayDetail==false}}'>
        <button class="cu-btn block bg-gray   text-green lg"  >确认金额</button>
    </view>
    <view class='padding-lr margin-top-sm'  wx:if='{{showPayDetail}}'>        
        <button class="cu-btn  bg-green text-white block lg" catchtap='toPay' >微信支付</button>
    </view>
    <view class='padding-lr margin-top-sm text-green flex justify-center align-center'  wx:if="{{couponList.length>0}}">   
        <text class="cuIcon-rechargefill ">您有{{couponList.length}}张优惠券，支付自动核销</text>
    </view>
    
        
 
    <!-- <view class="flex justify-center margin-top">
        <image src="/images/swiper2.jpg" mode="widthFix" style="width:90vw"></image>
    </view>
    <view class="flex justify-center margin-top">
        <button class="cu-btn bg-yellow text-white round">参与活动</button>
    </view> -->

    <view class="margin-top-xl text-sm text-gray padding-lr" hidden="{{cardList.length==0}}">
        <text class="cuIcon-title margin-right-xs"></text> 
        <text class="">领取先享卡后再付款，笔笔都优惠</text>
    </view>    
    <view class="cu-card padding-lr margin-top-xs" wx:for="{{cardList}}">
        <view class=" pg-radius  shadow shadow-warp {{ !isHasDiscountCard ? 'bg-gray text-black' : 'bg-yellow text-white' }} ">
            <view class="cu-bar  solid-bottom ">
                <view class="action">
                    <text class="cuIcon-title  "></text>                
                    <text class="">先享卡优惠</text>                        
                </view>
                <view class="action">
                    <button class="cu-btn bg-white text-yellow round" catchtap="getCardDetail" wx:if="{{isHasDiscountCard}}">查看先享卡</button>
                    <button class="cu-btn bg-yellow text-white round " wx:else
                            catchtap="getNewCard" data-discount_card_id="{{item.discount_card_id}}"
                        >领取先享卡</button>
                </view>
            </view>
            <view class="cu-list menu ">
                <view class="flex justify-between align-center padding ">
                    <view class="action">
                        <text class="">奖励</text>
                    </view>
                    <view class="action text-bold {{ isHasDiscountCard ? '' : 'text-red' }} text-xl basis-xl text-right" >
                        <text class="">{{item.reward_desc}}</text>
                    </view>
                </view>
                <view class="flex justify-between padding ">
                    <view class="action">
                        <text class="f">任务</text>
                    </view>
                    <view class="action basis-xl text-right">
                        <text class="">{{item.objective_desc}}</text>
                    </view>
                </view>
               
                <view class=" padding-lr padding-bottom ">
                     <view class="" style=" border-top: 1rpx solid rgba(0, 0, 0, 0.1) ;"  ></view>
                     <!-- {{ !isHasDiscountCard ? 'rgba(0, 0, 0, 0.1)' : '#ffffff' }}  -->
                    <view class="  text-sm  {{ !isHasDiscountCard ? ' text-gray' : ' text-white' }} margin-top-sm" >
                       <text class="cuIcon-info margin-right-xs"></text> <text class="">如未完成约定消费次数，微信支付将自动扣除已享优惠额度</text>
                    </view>
                </view>
                
            </view>     
        </view>
        
        
        <!-- <view class="flex justify-center margin-top"  wx:if="{{!isHasDiscountCard}}" >
            <button class="cu-btn bg-yellow text-white round " 
                catchtap="getNewCard" data-discount_card_id="{{item.discount_card_id}}"
            >领取奖励，再付款</button>
        </view> -->
    </view>


    <!-- <view class="flex justify-center padding ">
            <input placeholder="请输入消费金额"  placeholder-class="text-green"
            class="text-center text-bold text-xl text-red " type="digit" 
            value="{{inputPriceNum}}"
            bindfocus="inputFocus"
            bindblur="inputConfirm"
            maxlength="4"
            ></input>
    </view>
    <view style="padding: 0 120rpx;" >
        <view style=" border-top: 1rpx solid #07c160;" ></view>
        <view wx:if="{{showPayDetail}}">
            <view class="cu-list menu ">
                <view class="flex justify-between padding-top ">
                    <view class="action">
                        <text class="text-gray">支付价格：</text>
                    </view>
                    <view class="action ">                    
                        <text class="text-price "></text>{{inputPrice}}元
                    </view>
                </view>
                <view class="flex justify-between padding-top  ">
                    <view class="action">
                        <text class="">先享优惠：</text>
                    </view>
                    <view class="action text-red">                    
                        - <text class="text-price "></text>{{discountPrice}}元
                    </view>
                </view>
                <view class="flex justify-between padding-top ">
                    <view class="action">
                        <text class="text-gray">实际支付：</text>
                    </view>
                    <view class="action    text-green">  
                        <text class="text-price "></text>{{payPrice}}元
                    </view>
                </view>
            </view>     
        </view> 
        
    <view class='flex align-center justify-around padding bg-white' wx:if='{{showPayDetail}}'>        
        <button class="cu-btn round bg-green text-white block lg" catchtap='toPay' >微信支付</button>
    </view>
    </view>


    
    <view class="flex justify-center margin-top"  wx:if='{{showPayDetail==false}}'>
        <button class="cu-btn round line-green"  >确认金额</button>
    </view> -->

<!-- <button catchtap="toAlert">测试</button> -->

<!-- 
        <view class="cu-modal padding-tb-xl {{showDialog?'show':''}}" >
                <view class="cu-dialog" style=" position: relative;">
                    <view class="cu-bar bg-white justify-end">
                    <view class="content text-bold">支付成功</view>
                    <view class="action" catchtap="closeDialog">
                            <text class="cuIcon-close text-red"></text>
                    </view>
                    </view>
                    
                    
                            
                    <view class="cu-bar bg-white justify-end">
                        <view class="action">
                            <button class="cu-btn line-green round " catchtap="closeDialog">确认</button>
                            <button 
                                wx:if="{{isHasDiscountCard}}"
                                class="cu-btn bg-green text-white round margin-left" 
                                catchtap="getCardDetail"
                            >查看先享卡进度</button>
                        </view>
                    </view>
                </view>
            </view> -->
        
    <view class="cu-modal {{showDialog?'show':''}}" >
        <view class="cu-dialog" wx:if="{{couponContent.coupon_id}}">
            <view class="cu-bar bg-white justify-end" >
                <view class="content">领取优惠券成功</view>
                <view class="action" bindtap="hideModal">
                    <text class="cuIcon-close text-red" catchtap="closeDialog"></text>
                </view>
            </view>
            <!-- <view class="padding-xl">                
                {{couponSend.message}}
            </view> -->
            <view class="cu-bar bg-white justify-end">
                <view class="action">
                        <!-- <button class="cu-btn line-green text-green" bindtap="hideModal">取消</button> -->
                    <button class="cu-btn bg-green margin-left" catchtap="closeDialog">确定</button>

                </view>
            </view>
        </view> 
        <view class="cu-dialog" wx:else>
            <view class="cu-bar bg-white justify-end" >
                <view class="content">领取失败</view>
                <view class="action" bindtap="hideModal">
                    <text class="cuIcon-close text-red" catchtap="closeDialog"></text>
                </view>
            </view>
            <view class="padding-xl">                
                {{couponContent.message}}
            </view>
            <view class="cu-bar bg-white justify-end">
                <view class="action">
                        <!-- <button class="cu-btn line-green text-green" bindtap="hideModal">取消</button> -->
                    <button class="cu-btn bg-green margin-left" catchtap="closeDialog">确定</button>

                </view>
            </view>
        </view> 
    </view>


            <!-- <view class="cu-bar bg-white justify-end" wx:else>
                <view class="content">领取失败</view>
                    <view class="action" bindtap="hideModal">
                        <text class="cuIcon-close text-red" catchtap="closeDialog"></text>
                    </view>
                </view>
                <view class="padding-xl">                
                    {{couponSend.message}}
                </view>
                <view class="cu-bar bg-white justify-end">
                    <view class="action">
                     <button class="cu-btn line-green text-green" bindtap="hideModal">取消</button> 
                        <button class="cu-btn bg-green margin-left" catchtap="closeDialog">确定</button>

                    </view>
                </view>
            </view> -->

    <view class="pg-space-xl"></view>
    <view class="pg-space-xl"></view>
</view>



<view class="ad">
    <ad list="{{adList}}"></ad>
</view>

<view class='flex align-center justify-center padding text-gray  margin-bottom'>            
    <!-- <navigator class="cu-btn round bg-gray text-gray margin-right "url="/pages/sign/sign"  >商户先享开通</navigator> -->
    <button class="cu-btn round line-gray text-gray  " open-type="contact"  >小杯子先享卡客服</button>
</view>

<view class="pg-space"></view> 